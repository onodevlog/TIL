## DO
- Linux標準教科書 v4.0.0
- 読書「Webを支える技術」
- Linuxサーバ構築標準教科書 v4.0.1
  <br><br>

## Linux標準教科書
ネットワークアダプタを有効化と割り当てをNATに設定できていなかったため、<br>
外部とのIP通信が行えなかった<br>
Geminiを活用して、問題の特定、解決を行った<br>
ネットワークについての理解が深まったため、この問題に直面してよかった<br>
また、Gaminiを活用しての学習方法もつかめた気がする<br>
自力で調べるより圧倒的に早いのと<br>
解決するだけでなく、なぜ問題が起きているのか、なぜ解決できたのかなど<br>
なぜなぜで理解を深めることが出来る点がGeminiを活用した学習は非常に優れている
<br><br>

## Webを支える技術

<br><br>

## Linuxサーバ構築標準教科書
学習開始～「5.3.6 ドメイン名の取得」
次回「5.4 DNSを使った名前解決」から

### 疑問
DNSコンテンツサーバーではrecursion(再起問合せを)を禁止にしておく必要がある。
が、DNSキャッシュサーバーとして動作させる場合はrecursionを許可しておく必要があるのはなぜ？

DNSサーバーの役割（コンテンツサーバーとキャッシュサーバー）の違いを整理すると、なぜ再帰問合せ（Recursion）の許可・禁止を使い分ける必要があるのかが明確になります。

Linuxやネットワーク構築を学ぶ上で、この「役割の分離」はセキュリティの根幹となる重要な概念です。

---

#### 1. 再帰問合せ（Recursion）とは何か

再帰問合せとは、クライアントからのリクエストに対し、サーバーが「自分が答えを知らなくても、他のサーバーに聞いて回って最終的な答えを見つけてきてあげる」という動作のことです。

---

#### 2. キャッシュサーバーで再帰を許可する理由

**キャッシュサーバー（フルサービスリゾルバ）**の役割は、PCやスマホなどのクライアントに代わって名前解決を完了させることです。

* **役割の完遂:** クライアントは通常、自力で世界中の権威サーバーを渡り歩く能力を持ちません。そのため、キャッシュサーバーが再帰問合せを行い、ルートサーバーから順に辿ってIPアドレスを特定し、クライアントに「これが答えです」と返してあげる必要があります。
* **効率化:** 一度調べた結果を「キャッシュ」しておくことで、次回以降の問合せに高速に回答します。

> **結論:** 再帰を許可しなければ、クライアントに最終的な回答を届けるという「窓口業務」が成立しないためです。

---

#### 3. コンテンツサーバーで再帰を禁止する理由

**コンテンツサーバー（権威DNSサーバー）**の役割は、自分が管理しているドメインの情報（ゾーン情報）を、世界中の問い合わせに対して「正確に回答する」ことだけに特化しています。

ここで再帰を許可してしまうと、以下の大きなリスクが生じます。

##### ① DNSアンプ攻撃（増幅攻撃）への加担

これが最大の理由です。

* 攻撃者が、送信元を「攻撃対象のIPアドレス」に偽装して、あなたのサーバーに再帰問合せ（例：情報量の多いレコードの要求）を送ります。
* あなたのサーバーが親切に再帰問合せを実行して回答を返すと、その大きなデータが攻撃対象（偽装された送信元）に送りつけられます。
* 結果として、あなたのサーバーが踏み台にされ、他者への攻撃（DDoS攻撃）に利用されてしまいます。

##### ② DNSキャッシュポイズニングのリスク

再帰を許可するということは、外部から取得した情報を一時的に保持（キャッシュ）することを意味します。

* 攻撃者が偽の情報を注入し、あなたのサーバーがそれを信じてキャッシュしてしまうと、そのサーバーを参照しているユーザーが偽のサイトへ誘導されるリスクが高まります。

##### ③ リソースの浪費

コンテンツサーバーは本来、自分のドメインの応答に集中すべきです。不特定多数の再帰問合せを処理すると、CPUやメモリを無駄に消費し、本来の応答性能が低下します。

---

#### 4. 運用のベストプラクティス

現代のDNS運用では、**「コンテンツサーバー」と「キャッシュサーバー」を物理的または論理的に完全に分ける**ことが鉄則です。

| サーバーの種類 | 再帰問合せ(Recursion) | 主な対象ユーザー |
| --- | --- | --- |
| **キャッシュサーバー** | **許可**（ただし内部ネットワークのみ） | 社内LANやISPの契約者 |
| **コンテンツサーバー** | **禁止** | インターネット全体 |

LinuxでDNS（BINDなど）を設定する際は、`allow-recursion` 設定などを用いて、問い合わせを許可するIPアドレス範囲を厳格に制限することが求められます。

---
<br><br>

## 短期目標
- [ ] Linux基礎習得
  - [x] Linux標準教科書　ハンズオンで完走　1週目：2025/12/27
  - [ ] Linuxサーバー構築標準教科書　ハンズオンで完走
  - [ ] Linuxシステム管理標準教科書　ハンズオンで完走
- [ ] PHP基礎習得
  - [ ] 環境構築
- [ ] Docker環境構築
- [ ] MySQL基礎習得
  - [ ] 読書「達人に学ぶDB設計徹底指南書」
- [ ] Laravel基礎習得、アプリ制作
- [ ] AWSでEC2を立てて、Linux環境を構築
- [ ] ネットワークについての理解を深める
  - [ ] 読書「Webを支える技術」
  - [ ] 読書「ネットワークはなぜつながるのか」
  - [ ] 読書「DNSがよくわかる教科書」
  - [ ] 読書「マスタリングTCP/IP入門編」
- [ ] セキュリティについての理解を深める
  - [ ] 読書「体系的に学ぶ　安全なWebアプリケーションの作り方」
<br><br>

## 中長期目標
- [ ] LAMP環境の構築(Linux Apache MySQL PHP)
- [ ] ポートフォリオ制作
- [ ] 基本情報技術者合格
- [ ] AWS ASS合格
- [ ] LPIC-1合格
